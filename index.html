<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gibraltar Gaels US Masters Fundraiser</title>
  <style>
    #entryTab, #leaderboardTab {
      transition: opacity 0.4s ease;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 2rem;
      background-color: #f9f9f9;
    }
    h1, h2 {
      text-align: center;
      color: #c00000;
    }
    .payment-info, .form-container, .leaderboard-container {
      max-width: 900px;
      margin: 2rem auto;
      background: #fff;
      padding: 2rem;
      border: 3px solid #c00000;
      border-radius: 20px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }
    .payment-info a {
      color: #c00000;
      font-weight: bold;
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
    }
    button {
      background-color: #c00000;
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin-top: 1.5rem;
    }
    button:hover {
      background-color: #a00000;
    }
    .leaderboard-container h2 {
      margin-top: 0;
      color: #c00000;
    }
    .leaderboard-iframe {
      border-radius: 12px;
      border: none;
      width: 100%;
      height: 500px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.15);
    }
    .leaderboard-header {
      text-align: center;
      font-size: 1.4rem;
      font-weight: bold;
      color: #c00000;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <nav style="text-align:center; margin-bottom: 2rem;">
    <button onclick="showTab('entry')" style="margin: 0 1rem; padding: 0.5rem 1rem; font-size: 1rem; background-color: #c00000; color: white; border: none; border-radius: 5px; cursor: pointer;">To Enter</button>
    <span style="display:inline-block; width: 2rem;"></span>
    <button onclick="showTab('leaderboard')" style="margin: 0 1rem; padding: 0.5rem 1rem; font-size: 1rem; background-color: #c00000; color: white; border: none; border-radius: 5px; cursor: pointer;">Leaderboard</button>
  </nav>
<div id="countdown" style="text-align:center; font-weight:bold; font-size:1.2rem; margin-bottom:1rem;"></div>

  <div id="entryTab">

  <h1>Gibraltar Gaels US Masters Fundraiser</h1>

  <div class="form-container">
    <h2>How It Works</h2>
    <p><strong>1.</strong> Choose <strong>one golfer from each of the five groups</strong> below.</p>
    <p><strong>2.</strong> Your golfers will earn points based on their performance:</p>
    <ul>
      <li>1st in group: 5 points</li>
      <li>2nd in group: 4 points</li>
      <li>3rd in group: 3 points</li>
      <li>4th in group: 2 points</li>
      <li>5th in group: 1 point</li>
      <li>Missed cut: -1 point</li>
    </ul>
    <p><strong>3.</strong> Bonus Points:</p>
    <ul>
      <li>+5 points if you correctly predict the tournament winner</li>
      <li>+2 points if your golfer is the tournament leader at the end of Round 1, Round 2, or Round 3</li>
    </ul>
    <p><strong>4.</strong> Tiebreaker Rules (Dead Heat Scoring):</p>
    <p>If players tie for a position in a group, the points for the tied positions are added together and divided equally among them.</p>
    <p><em>Example:</em> If 3 players tie for 2nd place, the points for 2nd (4), 3rd (3), and 4th (2) are added (total 9) and divided by 3 ‚Äî each tied player earns 3 points.</p>
    <p><strong>Total points on offer per group = 15</strong> (5 + 4 + 3 + 2 + 1)</p>
    <p><strong>5.</strong> Entry is <strong>‚Ç¨10</strong>. Winner takes all ‚Äî ties split the prize.</p>
    <p><strong>6.</strong> Submit your payment via Revolut: <a href="https://revolut.me/killiavb3" target="_blank">revolut.me/killiavb3</a></p>
  </div>

  <div class="payment-info">
    <h2>How to Enter</h2>
    <ol>
      <li>
        <strong>Pay the ‚Ç¨10 entry fee</strong> via Revolut using the link below:
        <div style="text-align: center; font-size: 1.2rem; font-weight: bold; margin: 1rem 0;">
          <a href="https://revolut.me/killiavb3" target="_blank">üí∏ revolut.me/killiavb3</a>
        </div>
        <p><strong>Important:</strong> When sending payment, add a note with your <u>Full Name</u> and the word <u>‚ÄúMasters‚Äù</u> so Killian knows who the entry is from.</p>
        <p><em>Example: ‚ÄúJohn Smith - Masters‚Äù</em></p>
      </li>
      <li>
        <strong>Submit your picks using the entry form below.</strong>
      </li>
    </ol>
    <p style="margin-top: 1rem;"><em>Your entry will only be valid once payment is confirmed.</em></p>
  </div>

  <div class="form-container">
    <h2>Submit Your Entry</h2>
    <form id="entryForm">
      <label for="name">Full Name</label>
      <input type="text" name="name" id="name" required>

      <label for="email">Email Address</label>
      <input type="email" name="email" id="email" required>

      <label for="groupA">Group A</label>
      <select name="groupA" id="groupA" required>
        <option value="">-- Select a golfer --</option>
        <option>Scottie Scheffler</option>
        <option>Rory McIlroy</option>
        <option>Collin Morikawa</option>
        <option>Jon Rahm</option>
        <option>Ludvig Aberg</option>
        <option>Xander Schauffele</option>
        <option>Bryson DeChambeau</option>
        <option>Justin Thomas</option>
        <option>Hideki Matsuyama</option>
        <option>Joaquin Niemann</option>
      </select>

      <label for="groupB">Group B</label>
      <select name="groupB" id="groupB" required>
        <option value="">-- Select a golfer --</option>
        <option>Jordan Spieth</option>
        <option>Viktor Hovland</option>
        <option>Brooks Koepka</option>
        <option>Shane Lowry</option>
        <option>Tyrrell Hatton</option>
        <option>Tommy Fleetwood</option>
        <option>Will Zalatoris</option>
        <option>Min Woo Lee</option>
        <option>Patrick Cantlay</option>
        <option>Akshay Bhatia</option>
        <option>Corey Conners</option>
        <option>Cameron Smith</option>
        <option>Russell Henley</option>
        <option>Tony Finau</option>
        <option>Robert MacIntyre</option>
      </select>

      <label for="groupC">Group C</label>
      <select name="groupC" id="groupC" required>
        <option value="">-- Select a golfer --</option>
        <option>Jason Day</option>
        <option>Sahith Theegala</option>
        <option>Wyndham Clark</option>
        <option>Sungjae Im</option>
        <option>Dustin Johnson</option>
        <option>Patrick Reed</option>
        <option>Tom Kim</option>
        <option>Matt Fitzpatrick</option>
        <option>Maverick McNealy</option>
        <option>Daniel Berger</option>
        <option>Justin Rose</option>
        <option>Sergio Garcia</option>
        <option>Nicolai Hojgaard</option>
        <option>Lucas Glover</option>
        <option>Cameron Young</option>
        <option>Adam Scott</option>
        <option>Davis Thompson</option>
        <option>Rasmus Hojgaard</option>
        <option>Billy Horschel</option>
        <option>Brian Harman</option>
      </select>

      <label for="groupD">Group D</label>
      <select name="groupD" id="groupD" required>
        <option value="">-- Select a golfer --</option>
        <option>Keegan Bradley</option>
        <option>Taylor Pendrith</option>
        <option>Thomas Detry</option>
        <option>Max Greyserman</option>
        <option>Aaron Rai</option>
        <option>Michael Kim</option>
        <option>J.J. Spaun</option>
        <option>Max Homa</option>
        <option>Byeong Hun An</option>
        <option>Harris English</option>
        <option>Phil Mickelson</option>
        <option>Nick Dunlap</option>
        <option>Christiaan Bezuidenhout</option>
        <option>Laurie Canter</option>
        <option>Cameron Davis</option>
        <option>Nick Taylor</option>
        <option>Tom Hoge</option>
        <option>J.T. Poston</option>
        <option>Denny McCarthy</option>
        <option>Matthieu Pavon</option>
      </select>

      <label for="groupE">Group E</label>
      <select name="groupE" id="groupE" required>
        <option value="">-- Select a golfer --</option>
        <option>Austin Eckroat</option>
        <option>Nico Echavarria</option>
        <option>Stephan Jaeger</option>
        <option>Chris Kirk</option>
        <option>Bubba Watson</option>
        <option>Thriston Lawrence</option>
        <option>Charl Schwartzel</option>
        <option>Danny Willett</option>
        <option>Davis Riley</option>
        <option>Matt McCarty</option>
        <option>Kevin Yu</option>
        <option>Patton Kizzire</option>
        <option>Jhonattan Vegas</option>
        <option>Adam Schenk</option>
        <option>Zach Johnson</option>
        <option>Fred Couples</option>
        <option>Jose Maria Olazabal</option>
        <option>Mike Weir</option>
        <option>Vijay Singh</option>
        <option>Rafael Campos</option>
      </select>

      <button type="submit">Submit Entry</button>
    </form>
  </div>

  </div>

<div style="height: 3rem;"></div>
<div id="leaderboardTab" style="display:none;">
  <div class="leaderboard-container">
    <div class="leaderboard-header">Live Leaderboard</div>
    <div id="customLeaderboard" class="leaderboard-table"></div>
  </div>
</div>
</div>
    
  </div>

  <script>
    document.getElementById("entryForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const form = e.target;
      const data = new FormData(form);
      fetch("https://script.google.com/macros/s/AKfycbw69QbqrzYKseXts-TdZDlBY46fB-tLIjdIKguPbWMBSQ64tLJemKHIiJyKAYRbG-9omw/exec", {
        method: "POST",
        body: data,
      })
      .then(response => {
        if (response.ok) {
          window.location.href = "thank-you.html";
        } else {
          alert("There was an issue submitting your entry. Please try again later.");
        }
      })
      .catch(error => {
        console.error("Submission error:", error);
        alert("Submission failed. Please try again later.");
      });
    });
  </script>

<script>
  window.leaderboardLoaded = false;
  async function loadLeaderboard() {
    const url = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR5k0KDU82aiZZxwBnEqzbmxH0LculvLuSaL_BY7b30YKdsItZk20kaLUN0R3_Mg6v2F9Wrk7PskHLq/pub?gid=722914475&single=true&output=csv';
    const response = await fetch(url);
    const data = await response.text();
  const rows = data.trim().split('\n').map(row => row.split(','));


    let html = '<div style="overflow-x:auto;"><table style="min-width:850px; width:100%; border-collapse:collapse; text-align:left;">';
    html += '<thead><tr style="background-color:#c00000; color:white;">'
          + '<th style="padding:10px;">Rank</th>'
          + '<th style="padding:10px;">Name</th>'
          + '<th style="padding:10px;">Group A</th>'
          + '<th style="padding:10px;">Group B</th>'
          + '<th style="padding:10px;">Group C</th>'
          + '<th style="padding:10px;">Group D</th>'
          + '<th style="padding:10px;">Group E</th>'
          + '<th style="padding:10px;">Total</th>'
          + '</tr></thead>';
    html += '<tbody>';

    const dataRows = rows.slice(1).filter(row => row.length >= 12);
    dataRows.sort((a, b) => parseInt(b[11] || 0) - parseInt(a[11] || 0));

    for (let i = 0; i < dataRows.length; i++) {
      const [name, a, b, c, d, e,,,,,, total] = dataRows[i];
      let medal = '';
      if (i === 0) medal = 'ü•á';
      else if (i === 1) medal = 'ü•à';
      else if (i === 2) medal = 'ü•â';

      html += `<tr style="background-color:${i % 2 === 0 ? '#fff' : '#f5f5f5'};">
        <td style="padding:10px; font-weight:bold;">${i + 1}</td>
        <td style="padding:10px; font-weight:bold;">${medal} ${name}</td>
        <td style="padding:10px;">${a}</td>
        <td style="padding:10px;">${b}</td>
        <td style="padding:10px;">${c}</td>
        <td style="padding:10px;">${d}</td>
        <td style="padding:10px;">${e}</td>
        <td style="padding:10px; font-weight:bold;">${total}</td>
      </tr>`;
    
    }

    html += '</tbody></table></div>';
    document.getElementById('customLeaderboard').innerHTML = html;
  }

  
</script>
<script>
  function showTab(tab) {
  const entryTab = document.getElementById('entryTab');
  const leaderboardTab = document.getElementById('leaderboardTab');

  entryTab.style.opacity = 0;
  leaderboardTab.style.opacity = 0;

  setTimeout(() => {
    entryTab.style.display = tab === 'entry' ? 'block' : 'none';
    leaderboardTab.style.display = tab === 'leaderboard' ? 'block' : 'none';

    setTimeout(() => {
      if (tab === 'entry') {
        entryTab.style.opacity = 1;
      } else {
        leaderboardTab.style.opacity = 1;
        if (!window.leaderboardLoaded) {
          loadLeaderboard();
          window.leaderboardLoaded = true;
        }
      }
    }, 50);
  }, 200);
}
// Countdown control
const deadline = new Date(new Date().getTime() + 5 * 60 * 1000);  // 5 minutes from now
    }
  ]
}.getTime();
const now = new Date().getTime();
const entryOpen = now < deadline;

const countdownEl = document.getElementById("countdown");
function updateCountdown() {
  const now = new Date().getTime();
  const t = deadline - now;
  if (t <= 0) {
    countdownEl.innerHTML = "‚úÖ Entries are now closed.";
    document.getElementById("entryTab").style.display = "none";
    document.querySelector("button[onclick=\"showTab('entry')\"]").style.display = "none";
    showTab('leaderboard');
    return;
  }
  const days = Math.floor(t / (1000 * 60 * 60 * 24));
  const hours = Math.floor((t % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  const minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((t % (1000 * 60)) / 1000);
  countdownEl.innerHTML = `‚è≥ Entries close in: ${days}d ${hours}h ${minutes}m ${seconds}s`;
}
setInterval(updateCountdown, 1000);
updateCountdown();

if (entryOpen) {
  showTab('entry');
} else {
  document.getElementById("entryTab").style.display = "none";
  document.querySelector("button[onclick=\"showTab('entry')\"]").style.display = "none";
  showTab('leaderboard');
}
</script>
</body>
</html>
